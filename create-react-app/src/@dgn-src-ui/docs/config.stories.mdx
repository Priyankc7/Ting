import { Meta } from "@storybook/addon-docs/blocks";

<Meta title="General/Configuration" />

# Configuration

The global configuration property, `config` is a property that can be passed into the `<View>` component to set global properties on the screen that gets rendered. The `config` prop is likely to be the same for every view, so it is recommended the desired configuration object be stored outside of the methods that render each `View`, such as `Context` or with Redux.

## Composition

| Name                                 | Description                                                                                                                                                                                                                                                                                                                                                                     | Default                                                                                                                                                |
| ------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| themeName                            | No other themes are currently available                                                                                                                                                                                                                                                                                                                                         | "defaultTheme"                                                                                                                                         |
| frame                                | If set to true, the UI will "frame" itself once the browser reaches 600px wide to prevent the UI from stretching too far. This should not be set to true for all cases, as some tablets have a screen size larger than 600px and the desired view does not include the app being "framed" in.                                                                                   | false                                                                                                                                                  |
| lang                                 | Default language set, must have corresponding language files set in `@dgn-src-ui/lang`. Currently the only accepted language is "en".                                                                                                                                                                                                                                           | "en"                                                                                                                                                   |
| session.timeout                      | Session timeout object containing the information needed to execute on session idle/ended functionality. If this value is false and not an object, the session idle screens will be automatically disabled.                                                                                                                                                                     |
| session.timeout.secondsBeforeWarning | When the user has been idle for this long, the UI automatically shows the `SessionEnding` screen over top of the current screen. Countdown shows how many seconds before the `secondsBeforeTimeout` value is reached. Subtracting one from the desired value will make sure they see a nice round number when the screen switches.                                              | 299                                                                                                                                                    |
| session.timeout.secondsBeforeTimeout | When the user has been idle for this long, the `onTimeout` callback is invoked. By default the screen will not automatically update to the `SessionEnded` screen. It only invokes the callback function.                                                                                                                                                                        | 360                                                                                                                                                    |
| session.timeout.onTimeout            | Callback function that gets invoked when `secondsBeforeTimeout` has been reached after no input from user (idle timeout). This callback must be used to redirect the user to the appropriate screen or the user will be sitting on this screen with a `00:00` counter. There is a `Notifications/SessionEnded` screen that can be loaded and is the recommended screen to load. | () => {}                                                                                                                                               |
| global.links.secure                  | URL string used for any "Secure" links.                                                                                                                                                                                                                                                                                                                                         | <a href="https://www.discoverglobalnetwork.com/en-us/what-we-offer/digital-payments/secure-remote-commerce">Copy Link Address</a>                      |
| global.links.terms                   | URL string used for any "Terms & Conditions" links.                                                                                                                                                                                                                                                                                                                             | <a href="https://www.discoverglobalnetwork.com/en-us/what-we-offer/digital-payments/secure-remote-commerce/terms-and-conditions">Copy Link Address</a> |
| global.links.privacy                 | URL string used for any "Privacy Policy" links.                                                                                                                                                                                                                                                                                                                                 | <a href="https://www.discoverglobalnetwork.com/en-us/what-we-offer/digital-payments/secure-remote-commerce/privacy">Copy Link Address</a>              |
| global.links.faq                     | URL string used for any "FAQ" links                                                                                                                                                                                                                                                                                                                                             | <a href="https://www.discoverglobalnetwork.com/downloads/discover-src-frequently-asked-questions.pdf">Copy Link Address</a>                            |

## Implementation

It is recommended that the desired configuration values are stored in a global context store, like Redux (or plain `Context`) so that the same values do not have to be constructed for every screen. You can then pull the object out of your global store every time you want to render a view and pass it in as a prop.

```js
const App = () => {
  // All of your app logic

  // Pull config out of your store. When you are setting the config
  // object (app init), it would look something like below. Please
  // note that thos configuration contains all of the default values,
  // you do not need to (and should not) use all of the values. A
  // deep merge will be used and whatever config object you send in
  // will be overlayed ontop of this one.
  let config = {
    themeName: "defaultTheme",
    frame: false,
    lang: "en",
    session: {
      timeout: {
        secondsBeforeWarning: 299,
        secondsBeforeTimeout: 360,
        onTimeout: () => {
          // Log user out and redirect to the
          // "Notification/SessionEnded" view
        },
      },
    },
    global: {
      links: {
        secure:
          "https://www.discoverglobalnetwork.com/en-us/what-we-offer/digital-payments/secure-remote-commerce",
        terms:
          "https://www.discoverglobalnetwork.com/en-us/what-we-offer/digital-payments/secure-remote-commerce/terms-and-conditions",
        privacy:
          "https://www.discoverglobalnetwork.com/en-us/what-we-offer/digital-payments/secure-remote-commerce/privacy",
        faq:
          "https://www.discoverglobalnetwork.com/downloads/discover-src-frequently-asked-questions.pdf",
      },
    },
  };

  // A more accurate example of a config implementation
  // below. You only need to define values that are
  // different than the default values
  let config = {
    session: {
      timeout: {
        onTimeout: () => {
          // timeout logic
        },
      },
    },
  };

  // Then put the config object in your global store, in a context
  // method, or hook, or whatever you want to do to save it globally
  Redux.storeStuff(config);
};

const VerificationChannelScreen = (props) => {
  // Business logic

  // For each view you want to load, pull the config object out of
  // your store and pass it in as a prop
  //
  let config = Redux.getStuff(); // redux logic to pull config object out

  // If you need to update the config object for this screen specifically
  // it might look something like...
  config = {
    ...config,
    frame: true,
  };

  return <View screen="VerificationChannel" {...props} config={config} />;
};
```
